---
title: "The COVID-19 in Singapore"
output: 
  distill::distill_article
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      error = FALSE, 
                      message = FALSE, 
                      warning = FALSE)
```



```{r}
library(tidyverse)
library(DT)
library(ggplot2)
library(hrbrthemes)
library(dplyr)
library(gganimate)
```


![](sg1.jpg){width=50}



# Data description

Data from [Our World in Data](https://ourworldindata.org/coronavirus).

After screening the data contains the following variables:

|**variable**      |**class**  |**description**                                |
|:-----------------|:----------|:----------------------------------------------|
|iso_code          | character | Country code as defined by ISO 3166-1 alpha-3 |
|location          | character | Country name                                  |
|date              | character | Calendar date                                 |
|total_cases       | double    | COVID-19 total case                           |
|new_cases         | double    | COVID-19 daily increase case                  |
|total_deaths      | double    | COVID-19 total deaths                         |
|new_deaths        | double    | COVID-19 new daily deaths                     |
|total_vaccinations| double    | COVID-19 Total number of people vaccinated    |
|total_tests       | double    | Total number of people tested for COVID-19    |


# Analysis & Summary

Here are some relevant data on COVID-19 in Singapore, including total (new) cases per day, total (new) deaths per day, the total number of people tested and the total number of people vaccinated. 

```{r}
dat <- read.csv("data/owid-covid-data.csv")
```

```{r}
sg <- dat %>% 
  select(iso_code,
         location,
         date,
         total_cases,
         new_cases,
         total_deaths,
         new_deaths,
         total_vaccinations,
         total_tests) %>% 
  filter(iso_code == "SGP")
```

```{r}
sg1 <- sg %>% 
  select(-iso_code,
         -location)
DT::datatable(sg1, options = list(pageLength = 5), caption = "Singapore Daily COVID19 Case")
```

The above tables shows the date, total number of cases, number of new cases per day, the total number of deaths, number of new deaths per day, total number of vaccinations and the total number of people tested for COVID-19 respectively. For various reasons, the data collected contains unknown values, all unknown values will not be shown and are blank. In the table, you can find data on the number of new cases or deaths on a specific date that you want to know.

```{r}
sg2 <- sg %>% 
  select(date,
         total_cases,
         new_cases,
         total_deaths,
         new_deaths)

sg3 <- sg2 %>% 
  mutate(date = as.Date(date))

sg4 <- sg3 %>% 
  pivot_longer(cols = -date,
               names_to = "Type",
               values_to = "Count") 

```

```{r}
sg5 <- sg4 %>% 
  group_by(date, Type) %>% 
  summarise(Count = cumsum(Count))
```


```{r}
q <- sg5 %>% 
  ggplot(aes(x = date,
             y = Count,
             group = Type,
             color = Type)) +
  geom_line() +
  geom_point() +
  scale_color_viridis_d() +
  ggtitle("Singapore Daily COVID-19 Cases") +
  theme_ipsum() +
  ylab("Number of cases") +
  transition_reveal(date)

animate(q, nframes = 350,fps = 25,  width = 1200, height = 1000, 
        renderer = gifski_renderer("sg.gif"))
```

